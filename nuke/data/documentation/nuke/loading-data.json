{"sections":[],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/nuke\/loading-data"]}],"primaryContentSections":[{"kind":"content","content":[{"type":"heading","anchor":"Overview","text":"Overview","level":2},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoader"},{"type":"text","text":" uses "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/reference\/foundation\/nsurlsession"},{"type":"text","text":" to load image data. The data is cached on disk using "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/reference\/foundation\/urlcache"},{"type":"text","text":", which by default is initialized with a memory capacity of 0 MB (Nuke only stores processed images in memory) and a disk capacity of 150 MB."}]},{"type":"aside","style":"tip","name":"Tip","content":[{"type":"paragraph","inlineContent":[{"text":"See ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/kean.blog\/post\/image-caching"},{"text":" to learn more about HTTP cache. To learn more about caching in Nuke and how to configure it, see ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/caching"},{"text":".","type":"text"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" class natively supports the following URL schemes: "},{"type":"codeVoice","code":"data"},{"type":"text","text":", "},{"type":"codeVoice","code":"file"},{"type":"text","text":", "},{"type":"codeVoice","code":"ftp"},{"type":"text","text":", "},{"type":"codeVoice","code":"http"},{"type":"text","text":", and "},{"type":"codeVoice","code":"https"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The default "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoader"},{"type":"text","text":" works great for most situations, but if you need to provide a custom networking layer, you can use a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoading"},{"type":"text","text":" protocol. See also, "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/kean\/Nuke-Alamofire-Plugin"},{"type":"text","text":"."}]},{"type":"heading","anchor":"Monitoring-Network-Requests","text":"Monitoring Network Requests","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Nuke can be used with "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/kean\/Pulse"},{"type":"text","text":" for monitoring network traffic."}]},{"type":"codeListing","syntax":"swift","code":["(ImagePipeline.shared.configuration.dataLoader as? DataLoader)?.delegate = URLSessionProxyDelegate()"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The same "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoader\/delegate"},{"type":"text","text":" can be used for modifying data loader behavior, e.g. for handling authentication requests and other aspects of data loading."}]},{"type":"codeListing","syntax":"swift","code":["\/\/ The delegate is retained by the `DataLoader`.","(ImagePipeline.shared.configuration.dataLoader as? DataLoader)?.delegate = YourDelegate()","","final class YourDelegate: URLSessionTaskDelegate {","    func urlSession(_ session: URLSession, task: URLSessionTask, didReceive challenge: URLAuthenticationChallenge, completionHandler: @escaping (URLSession.AuthChallengeDisposition, URLCredential?) -> Void) {","        \/\/ Handle authentication challenge...","    }","}"]},{"type":"heading","anchor":"Resumable-Downloads","text":"Resumable Downloads","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"If the data task is terminated when the image is partially loaded (either because of a failure or a cancellation), the next load will resume where the previous one left off. Resumable downloads require the server to support "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/HTTP\/Range_requests"},{"type":"text","text":". Nuke supports both validators: "},{"type":"codeVoice","code":"ETag"},{"type":"text","text":" and "},{"type":"codeVoice","code":"Last-Modified"},{"type":"text","text":". Resumable downloads are enabled by default. You can learn more in "},{"type":"reference","isActive":true,"identifier":"https:\/\/kean.blog\/post\/resumable-downloads"},{"type":"text","text":"."}]},{"type":"heading","anchor":"Custom-Networking-Layer","text":"Custom Networking Layer","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’d like to use Alamofire for networking, it’s easy to do thanks to an "},{"overridingTitleInlineContent":[{"text":"Alamofire plugin","type":"text"}],"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/kean\/Nuke-Alamofire-Plugin","overridingTitle":"Alamofire plugin"},{"type":"text","text":" that allows you to load image data using "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/Alamofire\/Alamofire"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’d like to use some other networking library or use your custom code, all you need to do is implement the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoading"},{"type":"text","text":" protocol consisting of a single method."}]},{"type":"codeListing","syntax":"swift","code":["\/\/\/ Implements data loading using Alamofire framework.","public class AlamofireDataLoader: Nuke.DataLoading {","    public let session: Alamofire.Session","","    \/\/\/ Initializes the receiver with a given Alamofire.SessionManager.","    \/\/\/ - parameter session: Alamofire.Session.default by default.","    public init(session: Alamofire.Session = Alamofire.Session.default) {","        self.session = session","    }","","    \/\/ MARK: DataLoading","","    \/\/\/ Loads data using Alamofire.SessionManager.","    public func loadData(with request: URLRequest, didReceiveData: @escaping (Data, URLResponse) -> Void, completion: @escaping (Error?) -> Void) -> Cancellable {","        let task = self.session.streamRequest(request)","        task.responseStream { [weak task] stream in","            switch stream.event {","            case let .stream(result):","                switch result {","                case let .success(data):","                    guard let response = task?.response else { return } \/\/ Never nil","                    didReceiveData(data, response)","                }","            case let .complete(response):","                completion(response.error)","            }","        }","        return AnyCancellable { task.cancel() }","    }","}"]}]}],"schemaVersion":{"patch":0,"major":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/com.github.kean.nuke\/documentation\/Nuke"]]},"abstract":[{"type":"text","text":"Learn how pipeline loads data."}],"metadata":{"modules":[{"name":"Nuke"}],"roleHeading":"API Collection","role":"collectionGroup","title":"Loading Data"},"identifier":{"url":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/loading-data","interfaceLanguage":"swift"},"kind":"article","topicSections":[{"title":"Data Loader","identifiers":["doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoading","doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoader","doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/Cancellable"],"anchor":"Data-Loader"}],"seeAlsoSections":[{"title":"Customization","identifiers":["doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/image-processing","doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/image-formats","doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipelineDelegate"],"generated":true,"anchor":"Customization"}],"references":{"https://kean.blog/post/resumable-downloads":{"title":"“Resumable Downloads”","titleInlineContent":[{"type":"text","text":"“Resumable Downloads”"}],"url":"https:\/\/kean.blog\/post\/resumable-downloads","identifier":"https:\/\/kean.blog\/post\/resumable-downloads","type":"link"},"https://github.com/kean/Nuke-Alamofire-Plugin":{"title":"Alamofire Plugin","titleInlineContent":[{"type":"text","text":"Alamofire Plugin"}],"url":"https:\/\/github.com\/kean\/Nuke-Alamofire-Plugin","identifier":"https:\/\/github.com\/kean\/Nuke-Alamofire-Plugin","type":"link"},"doc://com.github.kean.nuke/documentation/Nuke/DataLoader/delegate":{"fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"delegate","kind":"identifier"},{"text":": ","kind":"text"},{"text":"URLSessionDelegate","preciseIdentifier":"c:objc(pl)NSURLSessionDelegate","kind":"typeIdentifier"},{"text":"?","kind":"text"}],"url":"\/documentation\/nuke\/dataloader\/delegate","abstract":[{"type":"text","text":"The delegate that gets called for the callbacks handled by the data loader."},{"type":"text","text":" "},{"type":"text","text":"You can use it for observing the session events and modifying some of the"},{"type":"text","text":" "},{"type":"text","text":"task behavior, e.g. handling authentication challenges."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoader\/delegate","type":"topic","kind":"symbol","title":"delegate","role":"symbol"},"doc://com.github.kean.nuke/documentation/Nuke/DataLoader":{"title":"DataLoader","url":"\/documentation\/nuke\/dataloader","navigatorTitle":[{"text":"DataLoader","kind":"identifier"}],"abstract":[{"text":"Provides basic networking using ","type":"text"},{"code":"URLSession","type":"codeVoice"},{"text":".","type":"text"}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoader","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DataLoader","kind":"identifier"}],"role":"symbol","type":"topic","kind":"symbol"},"doc://com.github.kean.nuke/documentation/Nuke/caching":{"url":"\/documentation\/nuke\/caching","abstract":[{"type":"text","text":"Learn about cache layers in Nuke and how to configure them."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/caching","type":"topic","kind":"article","title":"Caching","role":"collectionGroup"},"doc://com.github.kean.nuke/documentation/Nuke/DataLoading":{"navigatorTitle":[{"kind":"identifier","text":"DataLoading"}],"title":"DataLoading","url":"\/documentation\/nuke\/dataloading","type":"topic","abstract":[{"text":"Fetches original image data.","type":"text"}],"role":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataLoading","kind":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"DataLoading"}]},"https://github.com/Alamofire/Alamofire":{"title":"Alamofire.SessionManager","titleInlineContent":[{"type":"text","text":"Alamofire.SessionManager"}],"url":"https:\/\/github.com\/Alamofire\/Alamofire","identifier":"https:\/\/github.com\/Alamofire\/Alamofire","type":"link"},"https://kean.blog/post/image-caching":{"title":"Image Caching","titleInlineContent":[{"type":"text","text":"Image Caching"}],"url":"https:\/\/kean.blog\/post\/image-caching","identifier":"https:\/\/kean.blog\/post\/image-caching","type":"link"},"doc://com.github.kean.nuke/documentation/Nuke/ImagePipelineDelegate":{"url":"\/documentation\/nuke\/imagepipelinedelegate","type":"topic","role":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipelineDelegate","title":"ImagePipelineDelegate","kind":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ImagePipelineDelegate"}],"navigatorTitle":[{"text":"ImagePipelineDelegate","kind":"identifier"}],"abstract":[{"text":"A delegate that allows you to customize the pipeline dynamically on a per-request basis.","type":"text"}]},"https://github.com/kean/Pulse":{"title":"Pulse","titleInlineContent":[{"type":"text","text":"Pulse"}],"url":"https:\/\/github.com\/kean\/Pulse","identifier":"https:\/\/github.com\/kean\/Pulse","type":"link"},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests":{"title":"HTTP Range Requests","titleInlineContent":[{"type":"text","text":"HTTP Range Requests"}],"url":"https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/HTTP\/Range_requests","identifier":"https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/HTTP\/Range_requests","type":"link"},"https://developer.apple.com/reference/foundation/urlcache":{"title":"URLCache","titleInlineContent":[{"type":"codeVoice","code":"URLCache"}],"url":"https:\/\/developer.apple.com\/reference\/foundation\/urlcache","identifier":"https:\/\/developer.apple.com\/reference\/foundation\/urlcache","type":"link"},"https://developer.apple.com/reference/foundation/nsurlsession":{"title":"URLSession","titleInlineContent":[{"type":"codeVoice","code":"URLSession"}],"url":"https:\/\/developer.apple.com\/reference\/foundation\/nsurlsession","identifier":"https:\/\/developer.apple.com\/reference\/foundation\/nsurlsession","type":"link"},"doc://com.github.kean.nuke/documentation/Nuke/image-formats":{"url":"\/documentation\/nuke\/image-formats","abstract":[{"type":"text","text":"Learn about image formats supported in Nuke and how to extend them."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/image-formats","type":"topic","kind":"article","title":"Image Formats","role":"collectionGroup"},"doc://com.github.kean.nuke/documentation/Nuke/Cancellable":{"navigatorTitle":[{"text":"Cancellable","kind":"identifier"}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Cancellable","kind":"identifier"}],"url":"\/documentation\/nuke\/cancellable","abstract":[{"type":"text","text":"A unit of work that can be cancelled."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/Cancellable","type":"topic","kind":"symbol","title":"Cancellable","role":"symbol"},"doc://com.github.kean.nuke/documentation/Nuke/image-processing":{"url":"\/documentation\/nuke\/image-processing","abstract":[{"type":"text","text":"Learn how to use existing image filters and create custom ones."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/image-processing","type":"topic","kind":"article","title":"Image Processing","role":"collectionGroup"},"doc://com.github.kean.nuke/documentation/Nuke":{"title":"Nuke","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke","kind":"symbol","url":"\/documentation\/nuke","type":"topic","role":"collection","abstract":[{"type":"text","text":"A powerful image loading system for Apple platforms."}]}}}
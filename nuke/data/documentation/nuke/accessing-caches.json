{"sections":[],"hierarchy":{"paths":[["doc:\/\/com.github.kean.nuke\/documentation\/Nuke","doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/caching"]]},"seeAlsoSections":[{"title":"Overview","identifiers":["doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/cache-layers"],"generated":true,"anchor":"Overview"}],"metadata":{"modules":[{"name":"Nuke"}],"roleHeading":"Article","role":"article","title":"Access Cached Images"},"identifier":{"url":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/accessing-caches","interfaceLanguage":"swift"},"kind":"article","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/nuke\/accessing-caches"]}],"schemaVersion":{"minor":3,"major":0,"patch":0},"abstract":[{"text":"Learn how to access cached images and data.","type":"text"}],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","text":"Overview","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"text":"The pipeline performs cache lookup automatically when you request an image, but you also have a fair deal of control over the caching behavior with ","type":"text"},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct","isActive":true,"type":"reference"},{"text":".","type":"text"}]},{"type":"heading","level":3,"text":"Fetching From Cache","anchor":"Fetching-From-Cache"},{"inlineContent":[{"text":"If you want to perform cache lookup without downloading the image from the network, use ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/returnCacheDataDontLoad"},{"type":"text","text":" option."}],"type":"paragraph"},{"code":["let request = ImageRequest(url: url, options: [.returnCacheDataDontLoad])","let response = try await pipeline.imageTask(with: request).response","let cacheType = response.cacheType \/\/ .memory, .disk, or nil"],"type":"codeListing","syntax":"swift"},{"name":"Important","style":"important","content":[{"type":"paragraph","inlineContent":[{"text":"This option only affects custom cache layers, but not ","type":"text"},{"code":"URLCache","type":"codeVoice"},{"text":", which is controlled by the ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system"},{"type":"text","text":"."}]}],"type":"aside"},{"level":3,"type":"heading","text":"Reloading Images","anchor":"Reloading-Images"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you need to reload an image, you can use "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","isActive":true,"type":"reference"},{"type":"text","text":" to remove the image from all cache layers (excluding "},{"code":"URLCache","type":"codeVoice"},{"type":"text","text":" that reloads automatically based on HTTP cache-control headers) before downloading it."}]},{"type":"codeListing","code":["let request = ImageRequest(url: url)","pipeline.cache.removeCachedImage(for: request)"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you want to keep the image in caches but reload it, you can instruct the pipeline to ignore the cached data."}]},{"type":"codeListing","code":["let request = ImageRequest(url: url, options: [ .reloadIgnoringCachedData])","let response = try await pipeline.imageTask(with: request).response"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct","isActive":true,"type":"reference"},{"type":"text","text":" provides even more granular control if needed, e.g. "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/disableMemoryCacheReads","isActive":true,"type":"reference"},{"type":"text","text":" and other similar options."}]},{"type":"heading","anchor":"Direct-Access","level":2,"text":"Direct Access"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can access any caching layer directly, but the pipeline also offers a convenience API: "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","isActive":true,"type":"reference"},{"type":"text","text":". By using it, you can update multiple cache layers at once, and you don’t need to worry about managing the cache keys. It works with custom caches ("},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching","isActive":true,"type":"reference"},{"type":"text","text":" and "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataCaching","isActive":true,"type":"reference"},{"type":"text","text":") but not with "},{"code":"URLCache","type":"codeVoice"},{"type":"text","text":", which is controlled by the "},{"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system","overridingTitleInlineContent":[{"type":"text","text":"URL loading system"}],"isActive":true,"type":"reference","overridingTitle":"URL loading system"},{"type":"text","text":"."}]},{"type":"heading","anchor":"Subscript","level":3,"text":"Subscript"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can access the memory cache with a subscript."}]},{"type":"codeListing","code":["let image = pipeline.cache[URL(string: \"https:\/\/example.com\/image.jpeg\")!]","pipeline.cache[ImageRequest(url: url)] = nil"],"syntax":"swift"},{"content":[{"inlineContent":[{"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer","isActive":true},{"type":"text","text":" contains some metadata about the image, and in the case of animated images or other images that require non-trivial rendering, also contains "},{"type":"codeVoice","code":"data"},{"type":"text","text":". It also allows you to distinguish between progressive previews in case "},{"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/isStoringPreviewsInMemoryCache","isActive":true},{"type":"text","text":" option is enabled."}],"type":"paragraph"}],"type":"aside","style":"note","name":"Note"},{"type":"paragraph","inlineContent":[{"type":"text","text":"All "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","isActive":true,"type":"reference"},{"type":"text","text":" respect request cache control options."}]},{"type":"codeListing","code":["let url = URL(string: \"https:\/\/example.com\/image.jpeg\")!","pipeline.cache[url] = ImageContainer(image: image)","","\/\/ Returns `nil` because memory cache reads are disabled","let request = ImageRequest(url: url, options: [.disableMemoryCacheReads])","let image = pipeline.cache[request]"],"syntax":"swift"},{"type":"heading","anchor":"Accessing-Images","level":3,"text":"Accessing Images"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Apart from the subscript, "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","isActive":true,"type":"reference"},{"type":"text","text":" also has methods for reading and writing images in either memory or disk cache or both."}]},{"type":"codeListing","code":["let cache = pipeline.cache","let request = ImageRequest(url: URL(string: \"https:\/\/example.com\/image.jpeg\")!)","","cache.cachedImage(for: request) \/\/ From any cache layer","cache.cachedImage(for: request, caches: [.memory]) \/\/ Only memory","cache.cachedImage(for: request, caches: [.disk]) \/\/ Only disk (decodes data)","","let data = cache.cachedData(for: request)","cache.containsData(for: request) \/\/ Fast contains check ","","\/\/ Stores image in the memory cache and stores an encoded","\/\/ image in the disk cache","cache.storeCachedImage(ImageContainer(image: image), for: request)","","cache.removeCachedImage(for: request)","cache.removeAll()"],"syntax":"swift"},{"type":"heading","anchor":"Managing-Cache-Keys","level":3,"text":"Managing Cache Keys"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You don’t need to worry about cache keys when working with "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","isActive":true,"type":"reference"},{"type":"text","text":", but it also gives you access to them in case you need it."}]},{"type":"codeListing","code":["let request = ImageRequest(url: URL(string: \"https:\/\/example.com\/image.jpeg\"))","pipeline.cache.makeImageCacheKey(for: request)","pipeline.cache.makeDataCacheKey(for: request)"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"There is also a hook in "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipelineDelegate","isActive":true,"type":"reference"},{"type":"text","text":" that allows you to customize how the keys are generated:"}]},{"type":"codeListing","code":["func cacheKey(for request: ImageRequest, pipeline: ImagePipeline) -> String? {","    request.userInfo[\"imageId\"] as? String","}"],"syntax":"swift"}]}],"references":{"doc://com.github.kean.nuke/documentation/Nuke":{"title":"Nuke","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke","kind":"symbol","url":"\/documentation\/nuke","type":"topic","role":"collection","abstract":[{"type":"text","text":"A powerful image loading system for Apple platforms."}]},"doc://com.github.kean.nuke/documentation/Nuke/ImageContainer/isPreview":{"fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"isPreview","kind":"identifier"},{"text":": ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"}],"url":"\/documentation\/nuke\/imagecontainer\/ispreview","abstract":[{"text":"Returns ","type":"text"},{"code":"true","type":"codeVoice"},{"text":" if the image in the container is a preview of the image.","type":"text"}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer\/isPreview","type":"topic","kind":"symbol","title":"isPreview","role":"symbol"},"doc://com.github.kean.nuke/documentation/Nuke/ImageCaching":{"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageCaching"}],"url":"\/documentation\/nuke\/imagecaching","title":"ImageCaching","role":"symbol","type":"topic","abstract":[{"type":"text","text":"In-memory image cache."}],"kind":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching","navigatorTitle":[{"kind":"identifier","text":"ImageCaching"}]},"doc://com.github.kean.nuke/documentation/Nuke/DataCaching":{"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"DataCaching"}],"url":"\/documentation\/nuke\/datacaching","title":"DataCaching","role":"symbol","type":"topic","abstract":[{"type":"text","text":"Data cache."}],"kind":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataCaching","navigatorTitle":[{"kind":"identifier","text":"DataCaching"}]},"doc://com.github.kean.nuke/documentation/Nuke/cache-layers":{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/cache-layers","title":"Cache Layers","type":"topic","role":"article","url":"\/documentation\/nuke\/cache-layers","abstract":[{"text":"Learn about memory and disk cache layers in Nuke.","type":"text"}],"kind":"article"},"doc://com.github.kean.nuke/documentation/Nuke/ImageRequest/Options-swift.struct/returnCacheDataDontLoad":{"title":"returnCacheDataDontLoad","url":"\/documentation\/nuke\/imagerequest\/options-swift.struct\/returncachedatadontload","type":"topic","abstract":[{"type":"text","text":"Use existing cache data and fail if no cached data is available."}],"role":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/returnCacheDataDontLoad","kind":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"returnCacheDataDontLoad","kind":"identifier"},{"text":": ","kind":"text"},{"text":"ImageRequest","kind":"typeIdentifier","preciseIdentifier":"s:4Nuke12ImageRequestV"},{"text":".","kind":"text"},{"text":"Options","kind":"typeIdentifier","preciseIdentifier":"s:4Nuke12ImageRequestV7OptionsV"}]},"doc://com.github.kean.nuke/documentation/Nuke/caching":{"url":"\/documentation\/nuke\/caching","abstract":[{"type":"text","text":"Learn about cache layers in Nuke and how to configure them."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/caching","type":"topic","kind":"article","title":"Caching","role":"collectionGroup"},"doc://com.github.kean.nuke/documentation/Nuke/ImagePipelineDelegate":{"url":"\/documentation\/nuke\/imagepipelinedelegate","type":"topic","role":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipelineDelegate","title":"ImagePipelineDelegate","kind":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ImagePipelineDelegate"}],"navigatorTitle":[{"text":"ImagePipelineDelegate","kind":"identifier"}],"abstract":[{"text":"A delegate that allows you to customize the pipeline dynamically on a per-request basis.","type":"text"}]},"doc://com.github.kean.nuke/documentation/Nuke/ImagePipeline/Cache-swift.struct":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Cache"}],"url":"\/documentation\/nuke\/imagepipeline\/cache-swift.struct","title":"ImagePipeline.Cache","role":"symbol","type":"topic","abstract":[{"text":"Provides a set of convenience APIs for managing the pipeline cache layers,","type":"text"},{"text":" ","type":"text"},{"text":"including ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching","type":"reference"},{"text":" (memory cache) and ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataCaching","type":"reference"},{"text":" (disk cache).","type":"text"}],"kind":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","navigatorTitle":[{"kind":"identifier","text":"Cache"}]},"doc://com.github.kean.nuke/documentation/Nuke/ImageRequest/Options-swift.struct/disableMemoryCacheReads":{"fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"disableMemoryCacheReads","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:4Nuke12ImageRequestV","text":"ImageRequest","kind":"typeIdentifier"},{"text":".","kind":"text"},{"preciseIdentifier":"s:4Nuke12ImageRequestV7OptionsV","text":"Options","kind":"typeIdentifier"}],"url":"\/documentation\/nuke\/imagerequest\/options-swift.struct\/disablememorycachereads","abstract":[{"text":"Disables memory cache reads (see ","type":"text"},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching","isActive":true,"type":"reference"},{"text":").","type":"text"}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/disableMemoryCacheReads","type":"topic","kind":"symbol","title":"disableMemoryCacheReads","role":"symbol"},"doc://com.github.kean.nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct/isStoringPreviewsInMemoryCache":{"title":"isStoringPreviewsInMemoryCache","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"isStoringPreviewsInMemoryCache","kind":"identifier"},{"text":": ","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"}],"abstract":[{"code":"true","type":"codeVoice"},{"text":" by default. If ","type":"text"},{"code":"true","type":"codeVoice"},{"text":", the pipeline will store all of the","type":"text"},{"text":" ","type":"text"},{"text":"progressively generated previews in the memory cache. All of the","type":"text"},{"text":" ","type":"text"},{"text":"previews have ","type":"text"},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer\/isPreview","isActive":true,"type":"reference"},{"text":" flag set to ","type":"text"},{"code":"true","type":"codeVoice"},{"text":".","type":"text"}],"kind":"symbol","role":"symbol","url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct\/isstoringpreviewsinmemorycache","type":"topic","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/isStoringPreviewsInMemoryCache"},"doc://com.github.kean.nuke/documentation/Nuke/ImageContainer":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageContainer"}],"type":"topic","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"ImageContainer"}],"role":"symbol","title":"ImageContainer","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer","url":"\/documentation\/nuke\/imagecontainer","abstract":[{"text":"An image container with an image and associated metadata.","type":"text"}]},"https://developer.apple.com/documentation/foundation/url_loading_system":{"title":"URL loading system","titleInlineContent":[{"type":"text","text":"URL loading system"}],"url":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system","type":"link"},"doc://com.github.kean.nuke/documentation/Nuke/ImageRequest/Options-swift.struct":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Options"}],"url":"\/documentation\/nuke\/imagerequest\/options-swift.struct","title":"ImageRequest.Options","role":"symbol","type":"topic","abstract":[{"text":"Image request options.","type":"text"}],"kind":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct","navigatorTitle":[{"kind":"identifier","text":"Options"}]}}}